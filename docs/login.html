<!DOCTYPE html>
<html>
<head>
  <title>Login | AgendaBarber</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-950 flex items-center justify-center h-screen">

<div class="bg-slate-900 p-8 rounded-xl w-96">
  <h2 class="text-2xl text-white font-bold mb-6 text-center">Entrar</h2>

  <input id="email" class="w-full p-3 mb-3 rounded bg-slate-800 text-white"
         placeholder="Email">

  <input id="password" type="password"
         class="w-full p-3 mb-4 rounded bg-slate-800 text-white"
         placeholder="Senha">

  <button id="btnLogin"
          class="w-full bg-green-500 text-black py-3 rounded font-semibold">
    Entrar
  </button>
</div>

<script type="module">
import { login } from './js/auth.js'

btnLogin.onclick = async () => {
  const { data, error } = await login(email.value, password.value)
  
  if (error) {
    alert('Erro ao fazer login: ' + error.message)
    return
  }
  
  if (!data.user) {
    console.log(data)
    alert('Erro: usuário não encontrado')
    return
  }
  
  location.href = 'router.html'
}
</script>

</body>
</html>
